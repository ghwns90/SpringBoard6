-- 테이블에 샘플 데이터를 축 : 1000개
--페이징 : 데이터 베이스에서 필요한 데이터를
--         일정한 갯수만큼 조회하는 방법
--         대량의 데이터를 10개씩 가져온다.


CREATE TABLE POST2
AS
  SELECT * FROM POST
  WHERE 1=0;
  
  
  
-- 테스트용 샘플데이터 추가하기
DECLARE
    DATA1 VARCHAR2(100) := '샘플동';
BEGIN
    FOR I IN 1 .. 10000 
    LOOP
        INSERT INTO POST2 (ZIPCODE, SIDO, GUGUN, DONG, BUNJI, SEQ)
        VALUES (TO_CHAR(I, '000000'), '부산', '부산진구', DATA1 || I, NULL, I);
    END LOOP;
    COMMIT;
END;
/


-- 전채자료수   -- 52144
SELECT  COUNT(*) FROM POST;

-- 페이지수
--- 한페이지 당 출력수 : 10개

-- 페이지
--  전체자료수 / 페에지당출력수
--  52144 / 10
SELECT  52144 / 10 FROM DUAL;         -- 5214.4 무조건 올림

SELECT  CEIL(52144 / 10) FROM DUAL;    -- 5215 무조건 올림


SELECT ROW_NUMBER() OVER (ORDER BY SEQ DESC) RN,
       ZIPCODE, SIDO, GUGUN, DONG, BUNJI, SEQ FROM POST
WHERE  DONG LIKE '%중앙%';

-- 2페이지 10개를 가져오세요
SELECT ROW_NUMBER() OVER (ORDER BY SEQ DESC) RN,
       ZIPCODE, SIDO, GUGUN, DONG, BUNJI, SEQ FROM POST
WHERE  DONG LIKE '%중앙%'
AND RN BETWEEN 11 AND 20
;


-- 오라클 옛날방식
SELECT * 
FROM ( 
    SELECT ROW_NUMBER() OVER (ORDER BY SEQ DESC) RN,
           ZIPCODE, SIDO, GUGUN, DONG, BUNJI, SEQ FROM POST
    WHERE  DONG LIKE '%중앙%'
) T
WHERE T.RN BETWEEN 11 AND 20;


--MYSQL
SELECT ZIPCODE, SIDO, GUGUN, DONG, BUNJI, SEQ FROM POST
WHERE  DONG LIKE '%중앙%' 
LIMIT 0,10;


--ORACLE 최신 버전
SELECT ZIPCODE, SIDO, GUGUN, DONG, BUNJI, SEQ FROM POST
WHERE  DONG LIKE '%중앙%'
OFFSET 30 ROWS FETCH NEXT 10 ROWS ONLY;
-- 30(0~) 번 자료부터 다음 10 ROWS 가져 온다 (31번줄 부터 10개 가져온다)












