<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.board.menus.mapper.MenuMapper">  
  <!-- 목록조회 -->
  <select id="getMenuList"  
          resultType = "com.board.menus.domain.MenuDTO" >
  
     SELECT      MENU_ID,  MENU_NAME,  MENU_SEQ
      FROM       MENUS
      ORDER  BY  MENU_SEQ ASC
  
  </select>
  
  <!-- 메뉴조회 -->
  <select id="getMenu"
          resultType = "com.board.menus.domain.MenuDTO" >
    
    SELECT   MENU_ID, MENU_NAME, MENU_SEQ
     FROM    MENUS
     WHERE   MENU_ID =  #{ menu_id  }
  
  </select>
  

  <!-- 메뉴 추가 -->
  <insert id="insertMenu">  
   
   INSERT INTO  MENUS 
   (
       MENU_ID,
       MENU_NAME,
       MENU_SEQ
   )
   VALUES 
   (
       #{ menu_id    },
       #{ menu_name  },
       #{ menu_seq   }   
   )   
   
  </insert> 
  
  <!-- 메뉴 추가 2 -->
  <insert  id="insertMenu2">
  
    INSERT   INTO   MENUS
    (
       MENU_ID,
       MENU_NAME,
       MENU_SEQ
    )
    VALUES 
    (
    	(
    	   SELECT  'MENU' || 
                TRIM( TO_CHAR(NVL(SUBSTR(MAX(MENU_ID), 5, 2), 0) + 1, '00')) 
            FROM  MENUS    	
    	),
    	#{  menu_name   },
    	(
    	   SELECT  NVL( MAX(MENU_SEQ), 0) + 1 FROM MENUS
    	)
    )
  
  
  </insert>
  
  
  <!-- 목록삭제 -->
  <delete id="deleteMenu">
   
     DELETE  FROM  MENUS
      WHERE  MENU_ID  = #{ menu_id  } 
  
  </delete>
  
  <!-- 메뉴 수정 -->
  <update id="update">
   
     UPDATE   MENUS 
      SET     MENU_NAME  = #{ menu_name },
              MENU_SEQ   = #{ menu_seq  }
      WHERE   MENU_ID = #{ menu_id }
  
  </update>
  
  
  
</mapper>